---
layout: base.njk
---

<!-- 1. SCHEMA DADOS (C√âREBRO) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": ["Product", "Recipe"],
  "name": "{{ title }}",
  "sku": "{{ sku }}",
  "image": "https://gourmetpratico.com.br{{ image }}",
  
  // AQUI EST√Å O SEGREDOS PARA O AGENTE ENTENDER O PRE√áO
  "offers": {
    "@type": "Offer",
    "price": "{{ price }}",
    "priceCurrency": "BRL",
    "availability": "{% if stock > 0 %}https://schema.org/InStock{% else %}https://schema.org/OutOfStock{% endif %}",
    "inventoryLevel": {
      "@type": "QuantitativeValue",
      "value": "{{ stock }}"
    },
    
    // AQUI EXPLICAMOS O "4+1" MATEMATICAMENTE
    "priceSpecification": [
      {
        "@type": "UnitPriceSpecification",
        "price": "{{ price }}",
        "priceCurrency": "BRL",
        "referenceQuantity": { "@type": "QuantitativeValue", "value": "1", "unitCode": "C62" }
      },
      {
        "@type": "UnitPriceSpecification",
        "price": "{{ (price * 4) / 5 }}", // O Rob√¥ calcula: R$ 27,84 por unidade
        "priceCurrency": "BRL",
        "referenceQuantity": { "@type": "QuantitativeValue", "value": "5", "unitCode": "C62" },
        "description": "Pre√ßo unit√°rio ao comprar o Pack ChefBox (Leve 5, Pague 4)"
      }
    ]
  },

  // AQUI EXPLICAMOS A NUTRI√á√ÉO PARA O AGENTE DE SA√öDE
  "nutrition": {
    "@type": "NutritionInformation",
    "calories": "{{ nutrition.calories }} calories",
    "proteinContent": "{{ nutrition.protein_g }} g",
    "carbohydrateContent": "{{ nutrition.carbs_g }} g",
    "fiberContent": "{{ nutrition.fiber_g }} g"
  }
}
</script>
  "description": "{{ description }}",
  "sku": "{{ sku }}",
  "author": {
    "@type": "Person",
    "name": "{{ author.name }}",
    "url": "{{ author.url }}"
  },
  "prepTime": "{{ tempo_iso }}",
  "recipeYield": "{{ rendimento }}",
  "nutrition": { "@type": "NutritionInformation", "calories": "{{ calorias }}" },
  "recipeIngredient": [ "Ver lista na embalagem" ], 
  "offers": {
    "@type": "Offer",
    "price": "{{ price }}",
    "priceCurrency": "BRL",
    "url": "https://gourmetpratico.com.br{{ page.url }}",
    "availability": "https://schema.org/InStock",
    "seller": { "@type": "Organization", "name": "ChefBrico" }
  },
  "mainEntity": {
    "@type": "FAQPage",
    "mainEntity": [
      {% for item in faq %}
      {
        "@type": "Question",
        "name": "{{ item.question }}",
        "acceptedAnswer": { "@type": "Answer", "text": "{{ item.answer }}" }
      }{% if not loop.last %},{% endif %}
      {% endfor %}
    ]
  }
}
</script>

<!-- 2. ESTILO CORRIGIDO (CSS) -->
<style>
  /* --- GERAL --- */
  .receita-header { text-align: center; max-width: 800px; margin: 40px auto; }
  .receita-title { color: #014039; font-size: 2.2rem; font-family: 'Merriweather', serif; margin-bottom: 10px; line-height: 1.2; }
  .receita-subtitle { color: #666; font-style: italic; font-size: 1.1rem; }

  /* --- METADADOS --- */
  .meta-bar {
      display: flex; justify-content: center; gap: 20px; margin: 25px 0;
      font-size: 0.85rem; color: #444; font-weight: 600; flex-wrap: wrap; text-transform: uppercase;
  }
  .meta-item { display: flex; align-items: center; gap: 6px; background: #fff; padding: 8px 15px; border-radius: 20px; border: 1px solid #eee; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
  .meta-icon { font-size: 1.1rem; }

  /* --- IMAGEM HERO --- */
  .hero-image-container {
      max-width: 900px; margin: 0 auto 40px; border-radius: 15px; overflow: hidden;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
  }
  .hero-image-container img { width: 100%; height: auto; display: block; }

  /* --- CONTE√öDO --- */
  .conteudo-leitura { max-width: 740px; margin: 0 auto; line-height: 1.7; color: #333; font-size: 1.05rem; }
  
  .conteudo-leitura h2 { 
      color: #014039; margin-top: 50px; margin-bottom: 20px;
      font-size: 1.6rem; font-family: 'Merriweather', serif;
  }

  /* --- 1. LISTA "POR QUE AMAR" (Check Verde) --- */
  .checked-list { list-style: none !important; padding-left: 0; }
  .checked-list li { position: relative; padding-left: 35px; margin-bottom: 15px; }
  .checked-list li::before {
      content: '‚úî'; 
      position: absolute; left: 0; top: 2px;
      width: 22px; height: 22px;
      border: 2px solid #27ae60; color: #27ae60;
      border-radius: 4px; font-size: 14px; font-weight: 900;
      display: flex; align-items: center; justify-content: center;
  }

  /* --- 2. LISTA "INGREDIENTES" (Quadrado Vazio CORRIGIDO) --- */
  .checklist { list-style: none !important; padding-left: 0; }
  .checklist li { position: relative; padding-left: 35px; margin-bottom: 10px; }
  .checklist li::before {
      content: ''; /* Garante que o quadrado apare√ßa */
      display: block;
      position: absolute; left: 0; top: 5px;
      width: 18px; height: 18px;
      background-color: #fff;
      border: 2px solid #ccc; /* Borda Cinza */
      border-radius: 4px;
  }

  /* --- 3. MODO DE PREPARO (CORRIGIDO - S√ì N√öMERO NA BOLINHA) --- */
  .modo-preparo { 
      list-style: none !important; /* MATOU O N√öMERO DUPLICADO AQUI */
      counter-reset: steps; 
      padding-left: 0; 
  }
  .modo-preparo li { 
      position: relative; 
      padding-left: 60px; /* Mais espa√ßo para a bolinha */
      margin-bottom: 25px; 
  }
  .modo-preparo li::before {
      counter-increment: steps;
      content: counter(steps); /* N√∫mero APENAS aqui dentro */
      position: absolute; 
      left: 0; top: -5px;
      width: 35px; height: 35px;
      background: #F2811D; /* Laranja */
      color: white;
      border-radius: 50%;
      text-align: center;
      line-height: 35px;
      font-weight: bold;
      font-size: 1.1rem;
      box-shadow: 0 3px 6px rgba(242, 129, 29, 0.3);
      z-index: 1;
  }

  /* --- SIMPLES ASSIM --- */
  .simples-assim {
      text-align: center;
      font-family: 'Dancing Script', cursive; 
      font-style: italic;
      font-size: 2rem;
      color: #27ae60;
      margin-top: 30px;
      margin-bottom: 50px;
      display: none; /* JS vai ativar */
      text-shadow: 1px 1px 0px #fff;
  }

  /* --- CARDS E DETALHES --- */
  .segredo-box {
      background: #ffffff; padding: 25px; margin: 30px auto; max-width: 800px;
      border-radius: 8px; color: #444; border-left: 5px solid #27ae60;
      box-shadow: 0 10px 25px rgba(0,0,0,0.08);
  }
  .dica-chef-card {
      background: white; border-left: 4px solid #F2811D; padding: 25px;
      border-radius: 8px; box-shadow: 0 10px 25px rgba(0,0,0,0.08); margin: 40px 0;
  }
  .conteudo-leitura blockquote { 
      padding: 20px; margin: 30px 0; font-style: italic; color: #555; 
      background: #f9f9f9; border-radius: 10px; text-align: center;
  }

  /* CTA e Pilares */
  .pilares-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin: 40px 0; text-align: center; }
  .pilar-card { padding: 15px; background: #fff; border: 1px solid #eee; border-radius: 10px; text-decoration: none; color: inherit; display: block; transition: all 0.2s; }
  .pilar-card:hover { transform: translateY(-3px); box-shadow: 0 5px 15px rgba(0,0,0,0.1); border-color: #27ae60; }

  .cta-box { background: linear-gradient(90deg, #fdfbf7 0%, #fff 100%); border: 1px solid #e0e0e0; border-radius: 12px; padding: 20px 30px; margin: 60px auto; max-width: 700px; display: flex; align-items: center; gap: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
  .cta-img { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; flex-shrink: 0; }
  .cta-content { flex-grow: 1; text-align: left; }
  .cta-content h3 { margin: 0 0 5px; font-size: 1.1rem; color: #014039; }
  .cta-content p { margin: 0; font-size: 0.9rem; color: #666; }
  .btn-comprar-agora { background: #F2811D; color: white; padding: 10px 20px; border-radius: 30px; font-weight: bold; text-decoration: none; font-size: 0.95rem; white-space: nowrap; transition: transform 0.2s; }
  .btn-comprar-agora:hover { transform: scale(1.05); }

  /* FAQ e Autor */
  details.faq-item { background: #fff; border-bottom: 1px solid #eee; }
  details.faq-item summary { padding: 15px 0; color: #333; font-weight: bold; cursor: pointer; display: flex; justify-content: space-between; }
  .author-box { display: flex; align-items: center; gap: 20px; background: #fafafa; padding: 25px; border-radius: 12px; margin-top: 60px; }
  .author-img { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; }
  
  @media (max-width: 600px) { .cta-box { flex-direction: column; text-align: center; } }
</style>

<!-- 3. ESTRUTURA (PALCO) -->
<article>
    
    <header class="receita-header">
        <h1 class="receita-title">{{ title }}</h1>
        <p class="receita-subtitle">O Sabor da It√°lia, sem a complica√ß√£o!</p>
        <p style="font-size: 0.85rem; margin-top: 10px; color: #999; text-transform: uppercase;">
            Por <strong>{{ author.name }}</strong>
        </p>
    </header>

    <!-- METADADOS -->
    <div class="meta-bar">
        <div class="meta-item"><span class="meta-icon">‚è±Ô∏è</span> {{ tempo_preparo }}</div>
        <div class="meta-item"><span class="meta-icon">‚öñÔ∏è</span> {{ calorias }}</div>
        <div class="meta-item"><span class="meta-icon">üçΩÔ∏è</span> {{ rendimento }}</div>
        <div class="meta-item" style="background-color: #e8f5e9; color: #2e7d32; border-color: #c8e6c9;">
            <span class="meta-icon">‚ö°</span> {{ dificuldade }}
        </div>
    </div>

    <!-- SEGREDO (CARD FLUTUANTE BRANCO) -->
    {% if citable_fact %}
    <div class="segredo-box">
        <strong>üí° O Segredo da Chef:</strong> {{ citable_fact }}
    </div>
    {% endif %}

    <div class="hero-image-container">
        <img src="{{ image }}" alt="Foto do prato {{ title }}">
    </div>

    <!-- WRAPPER DE CONTE√öDO -->
    <div class="conteudo-leitura">
        
        <div id="simples-assim-tag" class="simples-assim">Simples assim! ‚ú®</div>

        {{ content | safe }}

        <!-- PILARES -->
        <div class="pilares-grid">
            <a href="/comida-de-verdade/" class="pilar-card">
                <div style="font-size: 2rem;">ü•´</div>
                <h3>Despensa Inteligente</h3>
                <p style="font-size: 0.8rem; color: #666;">Ingredientes de longa validade.</p>
            </a>
            <a href="/comida-de-verdade/" class="pilar-card">
                <div style="font-size: 2rem;">ü•ò</div>
                <h3>Panela √önica</h3>
                <p style="font-size: 0.8rem; color: #666;">Menos lou√ßa, mais tempo.</p>
            </a>
            <a href="/comida-de-verdade/" class="pilar-card">
                <div style="font-size: 2rem;">üé®</div>
                <h3>Cozinha Criativa</h3>
                <p style="font-size: 0.8rem; color: #666;">Seu toque final.</p>
            </a>
        </div>

        <!-- CTA CHEFBOX -->
        <div class="cta-box">
            <img src="{{ image }}" class="cta-img" alt="Miniatura">
            <div class="cta-content">
                <h3>Gostou? Leve para casa.</h3>
                <p>Adicione √† sua <strong>ChefBox</strong> agora.</p>
            </div>
            <button onclick="addToGame('{{ title }}', {{ price }}, '{{ image }}', '{{ sku }}', '{{ page.url }}')" 
                    class="btn-comprar-agora" style="border:none; cursor:pointer;">
                + Adicionar (R$ {{ price | dinheiro }})
            </button>
        </div>

        <!-- FAQ -->
        {% if faq %}
        <div style="margin-top: 50px;">
            <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">D√∫vidas Frequentes</h3>
            {% for item in faq %}
            <details class="faq-item">
                <summary>{{ item.question }}</summary>
                <div class="faq-answer">{{ item.answer }}</div>
            </details>
            {% endfor %}
        </div>
        {% endif %}

        <!-- AUTORIDADE -->
        <div class="author-box">
            <img src="{{ author.image }}" alt="{{ author.name }}" class="author-img">
            <div class="author-info">
                <p style="margin:0; color:#555;">
                    <strong style="color:#014039;">{{ author.name }}</strong><br>
                    <span style="font-size:0.9rem;">{{ author.description }}</span>
                </p>
                <a href="{{ author.url }}" style="color:#F2811D; font-size:0.85rem; font-weight:bold; text-decoration:none; display:block; margin-top:5px;">
                    Ler Filosofia Completa ‚ûù
                </a>
            </div>
        </div>

    </div>
</article>

<!-- JAVASCRIPT "CIRURGI√ÉO" -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const headers = document.querySelectorAll('.conteudo-leitura h2');
        const simplesTag = document.getElementById('simples-assim-tag');
        
        headers.forEach(h2 => {
            const title = h2.innerText.toLowerCase();

            // 1. LISTA "POR QUE AMAR"
            if (title.includes('amar')) {
                const list = h2.nextElementSibling;
                if (list) list.classList.add('checked-list'); 
            }

            // 2. LISTA "INGREDIENTES/PRECISAR"
            if (title.includes('precisar') || title.includes('pacote')) {
                const list = h2.nextElementSibling;
                if (list) list.classList.add('checklist');
            }

            // 3. MODO DE PREPARO (CORRIGIDO)
            if (title.includes('preparo')) {
                const list = h2.nextElementSibling;
                if (list && (list.tagName === 'OL' || list.tagName === 'UL')) {
                    let targetList = list;
                    // For√ßa virar OL para garantir ordem
                    if (list.tagName === 'UL') {
                        const newOl = document.createElement('ol');
                        newOl.innerHTML = list.innerHTML;
                        list.parentNode.replaceChild(newOl, list);
                        targetList = newOl;
                    }
                    
                    targetList.classList.add('modo-preparo');
                    
                    // Posiciona o "Simples Assim" logo depois da lista
                    if (simplesTag) {
                        simplesTag.style.display = 'block'; 
                        targetList.after(simplesTag); 
                    }
                }
            }

            // 4. COZINHA CRIATIVA
            if (title.includes('criativa')) {
                const p = h2.nextElementSibling;
                if (p) p.classList.add('dica-chef-card');
            }
        });
    });
</script>
