---
layout: base.njk
---

<!-- ========================================================================== -->
<!-- 1. C√âREBRO DIGITAL (SCHEMA.ORG HIPER-AVAN√áADO)                             -->
<!-- ========================================================================== -->
<script type="application/ld+json">
{
  "@context": "https://schema.org/",
  "@type": ["Product", "Recipe"],
  "name": "{{ title }}",
  "description": "{{ description }}",
  "sku": "{{ sku }}",
  "gtin13": "{{ gtin }}",
  "image": {
    "@type": "ImageObject",
    "url": "https://gourmetpratico.com.br{{ image }}",
    "height": 566,
    "width": 1080
  },
  "brand": { "@type": "Brand", "name": "ChefBrico" },
  
  /* DADOS T√âCNICOS PARA AGENTES B2B */
  "additionalProperty": [
    { "@type": "PropertyValue", "name": "UNSPSC", "value": "{{ unspsc | default('50193100') }}" },
    { "@type": "PropertyValue", "name": "Peso L√≠quido", "value": "{{ peso_liquido_g }}g" },
    { "@type": "PropertyValue", "name": "Rendimento", "value": "{{ rendimento }}" }
  ],

  /* DADOS DE RECEITA (SEO DE VOZ) */
  "author": { "@type": "Person", "name": "{{ author_name }}" },
  "datePublished": "{{ date | postDate }}",
  "prepTime": "{{ tempo_iso }}",
  "cookTime": "{{ tempo_iso }}",
  "totalTime": "{{ tempo_iso }}",
  "recipeYield": "{{ rendimento }}",
  "recipeCategory": "{{ category }}",
  "recipeIngredient": [ "{{ ingredientes_texto }}" ],
  "recipeInstructions": [
    {% if instructions %}
      {% for step in instructions %}
      {
        "@type": "HowToStep",
        "name": "{{ step.name }}",
        "text": "{{ step.text }}",
        "position": {{ loop.index }}
      }{% if not loop.last %},{% endif %}
      {% endfor %}
    {% endif %}
  ],
  "nutrition": {
    "@type": "NutritionInformation",
    "calories": "{{ nutrition.calories }} calories",
    "proteinContent": "{{ nutrition.protein_g }} g",
    "carbohydrateContent": "{{ nutrition.carbs_g }} g",
    "fatContent": "{{ nutrition.fats_g }} g",
    "fiberContent": "{{ nutrition.fiber_g }} g",
    "sodiumContent": "{{ nutrition.sodium_mg }} mg",
    "servingSize": "{{ nutrition.portion }}"
  },

  /* DADOS COMERCIAIS (A L√ìGICA 4+1) */
  "offers": {
    "@type": "Offer",
    "price": "{{ price }}",
    "priceCurrency": "BRL",
    "url": "https://gourmetpratico.com.br{{ page.url }}",
    "availability": "{% if stock > 0 %}https://schema.org/InStock{% else %}https://schema.org/OutOfStock{% endif %}",
    "itemCondition": "https://schema.org/NewCondition",
    "seller": { "@type": "Organization", "name": "ChefBrico" },
    
    /* O SEGREDO DO A-COMMERCE: PRE√áO SEM√ÇNTICO */
    "priceSpecification": [
      {
        "@type": "UnitPriceSpecification",
        "price": "{{ price }}",
        "priceCurrency": "BRL",
        "referenceQuantity": { "@type": "QuantitativeValue", "value": "1", "unitCode": "C62" },
        "description": "Pre√ßo unit√°rio base."
      },
      {
        "@type": "UnitPriceSpecification",
        "price": "0.00",
        "priceCurrency": "BRL",
        "referenceQuantity": { "@type": "QuantitativeValue", "value": "1", "unitCode": "C62" },
        "eligibleQuantity": {
          "@type": "QuantitativeValue",
          "minValue": "5",
          "description": "Na compra de 5 unidades, o item de menor valor √© gratuito."
        },
        "description": "Presente ChefBox (Compre 4 Leve 5)"
      }
    ],
    "disambiguatingDescription": "Oferta Especial ChefBox: Ao selecionar 5 unidades, o cliente paga apenas por 4. O 5¬∫ item √© um presente (100% de desconto no item de menor valor)."
  },

  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "{{ rating.value }}",
    "reviewCount": "{{ rating.count }}"
  }
}
</script>

<!-- ========================================================================== -->
<!-- 2. CAMADA VISUAL (MANTIDA ID√äNTICA AO SEU DESIGN SYSTEM v5.0)              -->
<!-- ========================================================================== -->
<style>
  /* Importando vari√°veis globais para garantir consist√™ncia */
  .receita-header { text-align: center; max-width: 800px; margin: 40px auto; }
  .receita-title { color: var(--cor-institucional, #014039); font-size: 2.2rem; font-family: 'Merriweather', serif; margin-bottom: 10px; line-height: 1.2; }
  .receita-subtitle { color: #666; font-style: italic; font-size: 1.1rem; }

  /* Metadados Visuais */
  .meta-bar { display: flex; justify-content: center; gap: 20px; margin: 25px 0; font-size: 0.85rem; color: #444; font-weight: 600; flex-wrap: wrap; text-transform: uppercase; }
  .meta-item { display: flex; align-items: center; gap: 6px; background: #fff; padding: 8px 15px; border-radius: 20px; border: 1px solid #eee; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

  /* Imagem Hero */
  .hero-image-container { max-width: 900px; margin: 0 auto 40px; border-radius: 15px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
  .hero-image-container img { width: 100%; height: auto; display: block; }

  /* Conte√∫do */
  .conteudo-leitura { max-width: 740px; margin: 0 auto; line-height: 1.7; color: #333; font-size: 1.05rem; }
  .conteudo-leitura h2 { color: var(--cor-institucional, #014039); margin-top: 50px; margin-bottom: 20px; font-size: 1.6rem; font-family: 'Merriweather', serif; }

  /* Elementos Especiais (Segredo, Dica) */
  .segredo-box { background: #ffffff; padding: 25px; margin: 30px auto; max-width: 800px; border-radius: 8px; color: #444; border-left: 5px solid #27ae60; box-shadow: 0 10px 25px rgba(0,0,0,0.08); }
  .dica-chef-card { background: white; border-left: 4px solid var(--cor-cta, #F2811D); padding: 25px; border-radius: 8px; box-shadow: 0 10px 25px rgba(0,0,0,0.08); margin: 40px 0; }
  
  /* Listas Estilizadas */
  .checked-list { list-style: none !important; padding-left: 0; }
  .checked-list li { position: relative; padding-left: 35px; margin-bottom: 15px; }
  .checked-list li::before { content: '‚úî'; position: absolute; left: 0; top: 2px; width: 22px; height: 22px; border: 2px solid #27ae60; color: #27ae60; border-radius: 4px; font-size: 14px; font-weight: 900; display: flex; align-items: center; justify-content: center; }

  .modo-preparo { list-style: none !important; counter-reset: steps; padding-left: 0; }
  .modo-preparo li { position: relative; padding-left: 60px; margin-bottom: 25px; }
  .modo-preparo li::before { counter-increment: steps; content: counter(steps); position: absolute; left: 0; top: -5px; width: 35px; height: 35px; background: var(--cor-cta, #F2811D); color: white; border-radius: 50%; text-align: center; line-height: 35px; font-weight: bold; font-size: 1.1rem; box-shadow: 0 3px 6px rgba(242, 129, 29, 0.3); z-index: 1; }

  /* CTA Box */
  .cta-box { background: linear-gradient(90deg, #fdfbf7 0%, #fff 100%); border: 1px solid #e0e0e0; border-radius: 12px; padding: 20px 30px; margin: 60px auto; max-width: 700px; display: flex; align-items: center; gap: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
  .cta-img { width: 70px; height: 70px; border-radius: 50%; object-fit: cover; flex-shrink: 0; }
  .cta-content { flex-grow: 1; text-align: left; }
  .btn-comprar-agora { background: var(--cor-cta, #F2811D); color: white; padding: 10px 20px; border-radius: 30px; font-weight: bold; text-decoration: none; font-size: 0.95rem; white-space: nowrap; transition: transform 0.2s; display: inline-block; cursor: pointer; border: none; }
  .btn-comprar-agora:hover { transform: scale(1.05); }

  /* Tabela Nutricional (Cards) */
  .nutri-grid { display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin: 30px auto; max-width: 100%; }
  .nutri-card { background: #fff; border: 1px solid #eee; border-radius: 10px; width: 100px; overflow: hidden; box-shadow: 0 2px 5px rgba(0,0,0,0.05); text-align: center; flex-shrink: 0; }
  .nutri-head { background: var(--cor-institucional, #014039); color: white; font-size: 0.7rem; text-transform: uppercase; padding: 5px; font-weight: bold; height: 35px; display: flex; align-items: center; justify-content: center; }
  .nutri-body { padding: 8px 5px; background: #fdfbf7; }
  .nutri-value { font-size: 1.2rem; font-weight: 800; color: var(--cor-institucional, #014039); display: block; }
  .nutri-unit { font-size: 0.7rem; color: #777; }

  @media (max-width: 600px) { .cta-box { flex-direction: column; text-align: center; } }
</style>

<!-- ========================================================================== -->
<!-- 3. PALCO VISUAL (HTML)                                                     -->
<!-- ========================================================================== -->
<article>
    <header class="receita-header">
        <h1 class="receita-title">{{ title }}</h1>
        <p class="receita-subtitle">O Sabor da It√°lia, sem a complica√ß√£o!</p>
        <p style="font-size: 0.85rem; margin-top: 10px; color: #999;">Por <strong>{{ author_name }}</strong></p>
    </header>

    <div class="meta-bar">
        <div class="meta-item"><span class="meta-icon">‚è±Ô∏è</span> {{ tempo_preparo }}</div>
        <div class="meta-item"><span class="meta-icon">‚öñÔ∏è</span> {{ calorias }}</div>
        <div class="meta-item"><span class="meta-icon">üçΩÔ∏è</span> {{ rendimento }}</div>
        <div class="meta-item" style="background-color: #e8f5e9; color: #2e7d32; border-color: #c8e6c9;">
            <span class="meta-icon">‚ö°</span> {{ dificuldade }}
        </div>
    </div>

    {% if citable_fact %}
    <div class="segredo-box">
        <strong>üí° O Segredo da Chef:</strong> {{ citable_fact }}
    </div>
    {% endif %}

    <div class="hero-image-container">
        <img src="{{ image }}" alt="Foto do prato {{ title }}">
    </div>

    <div class="conteudo-leitura">
        
        <div id="simples-assim-tag" style="text-align: center; font-family: cursive; font-style: italic; font-size: 2rem; color: #27ae60; margin: 30px 0 50px; display: none;">Simples assim! ‚ú®</div>

        {{ content | safe }}

        <!-- CTA DE COMPRA (BOT√ÉO H√çBRIDO) -->
        <div class="cta-box">
            <img src="{{ image }}" class="cta-img" alt="Miniatura">
            <div class="cta-content">
                <h3>Gostou? Leve para casa.</h3>
                <p>Adicione √† sua <strong>ChefBox</strong> agora.</p>
            </div>
            <!-- A√á√ÉO: Adiciona ao Jogo (Humano) -->
            <button onclick="addToGame('{{ title }}', {{ price }}, '{{ image }}', '{{ sku }}', '{{ page.url }}')" 
               class="btn-comprar-agora">
               + Adicionar (R$ {{ price }})
            </button>
        </div>

        <!-- TABELA NUTRICIONAL -->
        {% if nutrition %}
        <div style="text-align: center; margin-top: 60px; border-top: 1px solid #eee; padding-top: 40px;">
            <h3 style="font-family: 'Merriweather', serif; color: var(--cor-institucional, #014039); margin-bottom: 5px;">Informa√ß√£o Nutricional</h3>
            <p style="font-size: 0.8rem; color: #999; margin-bottom: 20px;">Por√ß√£o de {{ nutrition.portion }}</p>

            <div class="nutri-grid">
                <div class="nutri-card">
                    <div class="nutri-head" style="background: var(--cor-cta, #F2811D);">Calorias</div>
                    <div class="nutri-body"><span class="nutri-value">{{ nutrition.calories }}</span><span class="nutri-unit">kcal</span></div>
                </div>
                <div class="nutri-card">
                    <div class="nutri-head">Carboidratos</div>
                    <div class="nutri-body"><span class="nutri-value">{{ nutrition.carbs_g }}</span><span class="nutri-unit">g</span></div>
                </div>
                <div class="nutri-card">
                    <div class="nutri-head">Prote√≠nas</div>
                    <div class="nutri-body"><span class="nutri-value">{{ nutrition.protein_g }}</span><span class="nutri-unit">g</span></div>
                </div>
                <div class="nutri-card">
                    <div class="nutri-head">Gorduras</div>
                    <div class="nutri-body"><span class="nutri-value">{{ nutrition.fats_g }}</span><span class="nutri-unit">g</span></div>
                </div>
                <div class="nutri-card">
                    <div class="nutri-head">Fibras</div>
                    <div class="nutri-body"><span class="nutri-value">{{ nutrition.fiber_g }}</span><span class="nutri-unit">g</span></div>
                </div>
                <div class="nutri-card">
                    <div class="nutri-head">S√≥dio</div>
                    <div class="nutri-body"><span class="nutri-value">{{ nutrition.sodium_mg }}</span><span class="nutri-unit">mg</span></div>
                </div>
            </div>
        </div>
        {% endif %}

        <!-- FAQ -->
        {% if faq %}
        <div style="margin-top: 50px;">
            <h3 style="border-bottom: 2px solid #eee; padding-bottom: 10px;">D√∫vidas Frequentes</h3>
            {% for item in faq %}
            <details class="faq-item" style="background: #fff; border-bottom: 1px solid #eee; padding: 15px 0;">
                <summary style="font-weight: bold; cursor: pointer;">{{ item.question }}</summary>
                <div class="faq-answer" style="padding-top: 10px; color: #555;">{{ item.answer }}</div>
            </details>
            {% endfor %}
        </div>
        {% endif %}

        <div class="author-box">
            <img src="/imagens/maria-conceicao-empreendedora-feira-tematica.png" alt="{{ author_name }}" class="author-img">
            <div class="author-info">
                <p style="margin:0; color:#555;">
                    <strong style="color:var(--cor-institucional, #014039);">{{ author_name }}</strong><br>
                    <span style="font-size:0.9rem;">Chef e Fundadora</span>
                </p>
                <a href="/comida-de-verdade/" style="color:var(--cor-cta, #F2811D); font-size:0.85rem; font-weight:bold; text-decoration:none; display:block; margin-top:5px;">
                    Ler Filosofia Completa ‚ûù
                </a>
            </div>
        </div>

    </div>
</article>

<!-- JAVASCRIPT: O MAESTRO DA EST√âTICA (Mantido para estilizar listas automaticamente) -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        const contentDiv = document.querySelector('.conteudo-leitura');
        const headers = contentDiv.querySelectorAll('h2');
        const simplesTag = document.getElementById('simples-assim-tag');
        
        // 1. INTRODU√á√ÉO CARD
        if (headers.length > 0) {
            let currentNode = contentDiv.firstChild;
            let introNodes = [];
            while (currentNode && currentNode !== headers[0]) {
                if (currentNode.nodeType === 1 && currentNode.tagName === 'P' && currentNode.innerText.trim().length > 0) {
                    introNodes.push(currentNode);
                }
                currentNode = currentNode.nextSibling;
            }
            introNodes.forEach(node => {
                node.classList.add('intro-card');
            });
        }

        // 2. ESTILIZAR LISTAS AUTOMATICAMENTE
        headers.forEach(h2 => {
            const title = h2.innerText.toLowerCase();
            if (title.includes('amar') || title.includes('pacote') || title.includes('pote')) {
                const list = h2.nextElementSibling;
                if (list) list.classList.add('checked-list'); 
            }
            if (title.includes('precisar') || title.includes('acompanhar') || title.includes('consumo')) {
                const list = h2.nextElementSibling;
                if (list) list.classList.add('checklist');
            }
            if (title.includes('preparo')) {
                const list = h2.nextElementSibling;
                if (list && (list.tagName === 'OL' || list.tagName === 'UL')) {
                    let targetList = list;
                    if (list.tagName === 'UL') {
                        const newOl = document.createElement('ol');
                        newOl.innerHTML = list.innerHTML;
                        list.parentNode.replaceChild(newOl, list);
                        targetList = newOl;
                    }
                    targetList.classList.add('modo-preparo');
                    if (simplesTag) {
                        simplesTag.style.display = 'block'; 
                        targetList.after(simplesTag); 
                    }
                }
            }
            if (title.includes('criativa') || title.includes('dica')) {
                const p = h2.nextElementSibling;
                if (p) p.classList.add('dica-chef-card');
            }
        });
    });
</script>
